import{aJ as A,d as se,e as $,i as oe,bc as ne,_ as te,h as P,r as w,bd as ae,j as f,be as D,D as le,w as re,O as ie,aj as ue,n as C,o as m,v as N,aa as ce,a1 as F,q as de,s as l,y,U as E,p as pe,E as H,x as fe,m as R,am as me,a3 as ge,a2 as ye,Q as j,bf as ve,ab as Ce,T as he,ac as be,a0 as Te,$ as we,f as k,k as U,F as q,aB as x,aH as M,bg as V,bh as Ee,bi as Se}from"./index-CgdI2ZD-.js";import{E as Be}from"./index-BZw7E3LX.js";import{m as Ne}from"./base-D57OZot1.js";const i={},Z=["primary","success","info","warning","error"],r=Ne({customClass:"",dangerouslyUseHTMLString:!1,duration:3e3,icon:void 0,id:"",message:"",onClose:void 0,showClose:!1,type:"info",plain:!1,offset:16,zIndex:0,grouping:!1,repeatNum:1,appendTo:A?document.body:void 0}),Me=se({customClass:{type:String,default:r.customClass},dangerouslyUseHTMLString:{type:Boolean,default:r.dangerouslyUseHTMLString},duration:{type:Number,default:r.duration},icon:{type:oe,default:r.icon},id:{type:String,default:r.id},message:{type:$([String,Object,Function]),default:r.message},onClose:{type:$(Function),default:r.onClose},showClose:{type:Boolean,default:r.showClose},type:{type:String,values:Z,default:r.type},plain:{type:Boolean,default:r.plain},offset:{type:Number,default:r.offset},zIndex:{type:Number,default:r.zIndex},grouping:{type:Boolean,default:r.grouping},repeatNum:{type:Number,default:r.repeatNum}}),ke={destroy:()=>!0},c=ne([]),xe=o=>{const n=c.findIndex(u=>u.id===o),e=c[n];let s;return n>0&&(s=c[n-1]),{current:e,prev:s}},ze=o=>{const{prev:n}=xe(o);return n?n.vm.exposed.bottom.value:0},Ie=(o,n)=>c.findIndex(s=>s.id===o)>0?16:n,Le=P({name:"ElMessage"}),Oe=P({...Le,props:Me,emits:ke,setup(o,{expose:n,emit:e}){const s=o,{Close:u}=ve,d=w(!1),{ns:a,zIndex:p}=ae("message"),{currentZIndex:h,nextZIndex:z}=p,g=w(),b=w(!1),I=w(0);let S;const J=f(()=>s.type?s.type==="error"?"danger":s.type:"info"),Q=f(()=>{const t=s.type;return{[a.bm("icon",t)]:t&&D[t]}}),L=f(()=>s.icon||D[s.type]||""),K=f(()=>ze(s.id)),O=f(()=>Ie(s.id,s.offset)+K.value),W=f(()=>I.value+O.value),X=f(()=>({top:`${O.value}px`,zIndex:h.value}));function B(){s.duration!==0&&({stop:S}=be(()=>{T()},s.duration))}function _(){S?.()}function T(){b.value=!1,Te(()=>{var t;d.value||((t=s.onClose)==null||t.call(s),e("destroy"))})}function Y({code:t}){t===we.esc&&T()}return le(()=>{B(),z(),b.value=!0}),re(()=>s.repeatNum,()=>{_(),B()}),ie(document,"keydown",Y),ue(g,()=>{I.value=g.value.getBoundingClientRect().height}),n({visible:b,bottom:W,close:T}),(t,Re)=>(m(),C(he,{name:l(a).b("fade"),onBeforeEnter:ee=>d.value=!0,onBeforeLeave:t.onClose,onAfterLeave:ee=>t.$emit("destroy"),persisted:""},{default:N(()=>[ce(F("div",{id:t.id,ref_key:"messageRef",ref:g,class:y([l(a).b(),{[l(a).m(t.type)]:t.type},l(a).is("closable",t.showClose),l(a).is("plain",t.plain),t.customClass]),style:de(l(X)),role:"alert",onMouseenter:_,onMouseleave:B},[t.repeatNum>1?(m(),C(l(Be),{key:0,value:t.repeatNum,type:l(J),class:y(l(a).e("badge"))},null,8,["value","type","class"])):E("v-if",!0),l(L)?(m(),C(l(H),{key:1,class:y([l(a).e("icon"),l(Q)])},{default:N(()=>[(m(),C(fe(l(L))))]),_:1},8,["class"])):E("v-if",!0),pe(t.$slots,"default",{},()=>[t.dangerouslyUseHTMLString?(m(),R(ge,{key:1},[E(" Caution here, message could've been compromised, never use user's input as message "),F("p",{class:y(l(a).e("content")),innerHTML:t.message},null,10,["innerHTML"])],2112)):(m(),R("p",{key:0,class:y(l(a).e("content"))},me(t.message),3))]),t.showClose?(m(),C(l(H),{key:2,class:y(l(a).e("closeBtn")),onClick:ye(T,["stop"])},{default:N(()=>[j(l(u))]),_:1},8,["class","onClick"])):E("v-if",!0)],46,["id"]),[[Ce,b.value]])]),_:3},8,["name","onBeforeEnter","onBeforeLeave","onAfterLeave"]))}});var _e=te(Oe,[["__file","message.vue"]]);let $e=1;const G=o=>{const n=!o||U(o)||q(o)||x(o)?{message:o}:o,e={...r,...n};if(!e.appendTo)e.appendTo=document.body;else if(U(e.appendTo)){let s=document.querySelector(e.appendTo);Ee(s)||(s=document.body),e.appendTo=s}return M(i.grouping)&&!e.grouping&&(e.grouping=i.grouping),k(i.duration)&&e.duration===3e3&&(e.duration=i.duration),k(i.offset)&&e.offset===16&&(e.offset=i.offset),M(i.showClose)&&!e.showClose&&(e.showClose=i.showClose),M(i.plain)&&!e.plain&&(e.plain=i.plain),e},De=o=>{const n=c.indexOf(o);if(n===-1)return;c.splice(n,1);const{handler:e}=o;e.close()},Fe=({appendTo:o,...n},e)=>{const s=`message_${$e++}`,u=n.onClose,d=document.createElement("div"),a={...n,id:s,onClose:()=>{u?.(),De(g)},onDestroy:()=>{V(null,d)}},p=j(_e,a,x(a.message)||q(a.message)?{default:x(a.message)?a.message:()=>a.message}:null);p.appContext=e||v._context,V(p,d),o.appendChild(d.firstElementChild);const h=p.component,g={id:s,vnode:p,vm:h,handler:{close:()=>{h.exposed.close()}},props:p.component.props};return g},v=(o={},n)=>{if(!A)return{close:()=>{}};const e=G(o);if(e.grouping&&c.length){const u=c.find(({vnode:d})=>{var a;return((a=d.props)==null?void 0:a.message)===e.message});if(u)return u.props.repeatNum+=1,u.props.type=e.type,u.handler}if(k(i.max)&&c.length>=i.max)return{close:()=>{}};const s=Fe(e,n);return c.push(s),s.handler};Z.forEach(o=>{v[o]=(n={},e)=>{const s=G(n);return v({...s,type:o},e)}});function He(o){const n=[...c];for(const e of n)(!o||o===e.props.type)&&e.handler.close()}v.closeAll=He;v._context=null;const Pe=Se(v,"$message");export{Pe as E};
