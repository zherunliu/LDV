import"./base-a29vmd9G.js";import{v as F,a as N,E as U,b as L}from"./el-table-column-CIPxT6s_.js";import{b as M}from"./el-select-RNHQ5BeY.js";import"./el-scrollbar-_2PSei7g.js";import"./el-popper-YLg6LvWR.js";import{E as j}from"./el-input-Cx7gfo4K.js";/* empty css                   */import{E as G}from"./el-button-UrRY79N8.js";import{E as Q,b as W,a as q}from"./el-card-DdTHapQA.js";import{r as u,a9 as H,h as J,D as K,m as O,Q as e,v as n,a1 as a,E as X,s as o,aR as h,am as p,aa as Y,n as Z,al as z,o as S,aw as $}from"./index-4ZyPtW_9.js";import{u as ee,f as b}from"./toThousands-CZQYXDfa.js";import{r as te,c as ae}from"./chargingstation-DmTM0Nzx.js";import"./_initCloneObject-CZXL9WhD.js";import"./isPlainObject-CIWxv5nY.js";import"./index-CK4XErsx.js";function ne(y,g=5){const C=u(0),d=H({page:1,pageSize:g});return{pageInfo:d,totals:C,handleSizeChange:r=>{d.pageSize=r,y()},handleCurrentChange:r=>{d.page=r,y()},resetPagination:()=>{d.page=1,d.pageSize=5},setTotals:r=>{C.value=r}}}const le={class:"title"},oe={class:"round"},se={class:"total"},re={class:"title"},ie={class:"round"},pe={class:"total"},de={class:"title"},ce={class:"round"},ue={class:"total"},ge={class:"title"},_e={class:"round"},me={class:"total"},fe={style:{display:"block"}},ve=J({__name:"Revenue",setup(y){const g=u(null);ee(g,async()=>{const t={tooltip:{trigger:"axis",axisPointer:{type:"cross"}},xAxis:{type:"category",boundaryGap:!1,data:["00:00","01:15","02:30","03:45","05:00","06:15","07:30","08:45","10:00","11:15","12:30","13:45","15:00","16:15","17:30","18:45","20:00","21:15","22:30","23:45"]},yAxis:{type:"value",axisLabel:{formatter:"{value} W"},axisPointer:{snap:!0}},visualMap:{show:!1,dimension:0,pieces:[{lte:6,color:"green"},{gt:6,lte:8,color:"red"},{gt:8,lte:14,color:"green"},{gt:14,lte:17,color:"red"},{gt:17,color:"green"}]},series:[{name:"Electricity",type:"line",smooth:!0,data:[]}]},c=await ae();return t.series[0].data=c.data,console.log(t),t});const d=u([]),_=u(!1),m=u(""),f=async()=>{_.value=!0;const{data:w}=await te({...r,name:m.value}),{list:t,total:c}=w;_.value=!1,T(c),d.value=t.map(s=>({...s,day:s.electricity+s.parkingFee+s.serviceFee+s.member}))},{totals:x,pageInfo:r,handleSizeChange:k,handleCurrentChange:D,setTotals:T}=ne(f);return K(()=>{f()}),(w,t)=>{const c=X,s=W,v=q,P=Q,A=G,I=j,i=N,E=M,R=U,V=L,B=F;return S(),O("div",null,[e(P,{gutter:20},{default:n(()=>[e(v,{span:6},{default:n(()=>[e(s,null,{default:n(()=>[a("div",le,[a("div",oe,[e(c,null,{default:n(()=>[e(o(h))]),_:1})]),t[3]||(t[3]=a("h4",null,"今日总收入",-1))]),a("div",se,[a("h1",null,p(o(b)(3243259)),1),t[4]||(t[4]=a("div",{class:"percent green"},"+21%",-1))])]),_:1})]),_:1}),e(v,{span:6},{default:n(()=>[e(s,null,{default:n(()=>[a("div",re,[a("div",ie,[e(c,null,{default:n(()=>[e(o(h))]),_:1})]),t[5]||(t[5]=a("h4",null,"会员卡储值金额",-1))]),a("div",pe,[a("h1",null,p(o(b)(47328593)),1),t[6]||(t[6]=a("div",{class:"percent green"},"+17%",-1))])]),_:1})]),_:1}),e(v,{span:6},{default:n(()=>[e(s,null,{default:n(()=>[a("div",de,[a("div",ce,[e(c,null,{default:n(()=>[e(o(h))]),_:1})]),t[7]||(t[7]=a("h4",null,"设备费金额",-1))]),a("div",ue,[a("h1",null,p(o(b)(624378)),1),t[8]||(t[8]=a("div",{class:"percent red"},"-3%",-1))])]),_:1})]),_:1}),e(v,{span:6},{default:n(()=>[e(s,null,{default:n(()=>[a("div",ge,[a("div",_e,[e(c,null,{default:n(()=>[e(o(h))]),_:1})]),t[9]||(t[9]=a("h4",null,"服务费金额",-1))]),a("div",me,[a("h1",null,p(o(b)(43624)),1),t[10]||(t[10]=a("div",{class:"percent red"},"-24%",-1))])]),_:1})]),_:1})]),_:1}),e(s,{class:"mt"},{default:n(()=>[a("div",{ref_key:"chartRef",ref:g,style:{width:"100%",height:"250px"}},null,512)]),_:1}),e(s,{class:"mt"},{default:n(()=>[e(I,{modelValue:m.value,"onUpdate:modelValue":t[0]||(t[0]=l=>m.value=l),style:{width:"300px"},placeholder:"请输入站点名称"},{append:n(()=>[e(A,{icon:"search",onClick:f})]),_:1},8,["modelValue"]),Y((S(),Z(R,{data:d.value},{default:n(()=>[e(i,{align:"center",type:"index",label:"序号",width:"80"}),e(i,{align:"center",prop:"name",label:"站点名称"}),e(i,{align:"center",prop:"id",label:"站点ID"}),e(i,{align:"center",prop:"city",label:"所属城市"}),e(i,{align:"center",prop:"count",label:"站点总量"}),e(i,{align:"center",prop:"day",label:"单日收入",width:"105",sortable:""},{default:n(l=>[a("span",fe,p(l.row.day),1),e(E,{type:l.row.percent>0?"success":"danger"},{default:n(()=>[z(p(l.row.percent>0?"+":"")+p(l.row.percent)+"% ",1)]),_:2},1032,["type"])]),_:1}),e(i,{align:"center",prop:"month",label:"月度收入"},{default:n(l=>[a("span",null,p(l.row.month),1),e(E,{type:l.row.mpercent>0?"success":"danger"},{default:n(()=>[z(p(l.row.mpercent>0?"+":"")+p(l.row.mpercent)+"% ",1)]),_:2},1032,["type"])]),_:1}),e(i,{align:"center",prop:"electricity",label:"电费营收"}),e(i,{align:"center",prop:"parkingFee",label:"停车费营收"}),e(i,{align:"center",prop:"serviceFee",label:"服务费营收"}),e(i,{align:"center",prop:"member",label:"会员储值金"})]),_:1},8,["data"])),[[B,_.value]]),e(V,{class:"mt fr mb","current-page":o(r).page,"onUpdate:currentPage":t[1]||(t[1]=l=>o(r).page=l),"page-size":o(r).pageSize,"onUpdate:pageSize":t[2]||(t[2]=l=>o(r).pageSize=l),"page-sizes":[5,10,15,20],background:"",layout:"total, sizes, prev, pager, next, jumper",total:o(x),onSizeChange:o(k),onCurrentChange:o(D)},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"])]),_:1})])}}}),Re=$(ve,[["__scopeId","data-v-12814f5a"]]);export{Re as default};
